<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>新闻编辑</title>
    <link rel="stylesheet" href="../style/weui.css" />
    <link rel="stylesheet" href="./example.css" />
</head>

<body ontouchstart>
    <div class="container" id="container">
        <div class="hd">
            <h1 class="page_title">我要投稿</h1>
        </div>
        <div class="bd">
            <form class="weui_cells weui_cells_form">
                <div class="weui_cell">
                    <div class="weui_cell_hd">
                        <label class="weui_label">新闻标题</label>
                    </div>
                    <div class="weui_cell_bd weui_cell_primary">
                        <input class="weui_input" type="text" placeholder="请输入标题" name="title" required/>
                    </div>
                </div>
                <div class="weui_cell">
                    <div class="weui_cell_hd">
                        <label class="weui_label">撰稿人</label>
                    </div>
                    <div class="weui_cell_bd weui_cell_primary">
                        <input class="weui_input" type="text" placeholder="撰稿人" name="author" required />
                    </div>
                </div>
                <div class="weui_cell">
                    <div class="weui_cell_bd weui_cell_primary">
                        <textarea class="weui_textarea" placeholder="请输入新闻内容" rows="5" name="content" required></textarea>
                    </div>
                </div>
                <div class="weui_cell"></div>
                <div class="weui_cells_title">上传图片</div>
                <div class="weui_cell">
                    <div class="weui_cell_bd weui_cell_primary">
                        <div class="weui_uploader">
                            <div class="weui_uploader_hd weui_cell">
                                <div class="weui_cell_bd weui_cell_primary">图片上传</div>
                                <div class="weui_cell_ft">0/2</div>
                            </div>
                            <div class="weui_uploader_bd">
                                <ul class="weui_uploader_files">
                                    <li id="previewer" class="weui_uploader_file weui_uploader_status" style="">
                                        <div class="weui_uploader_status_content">
                                            <i class="weui_icon_waiting"></i>
                                        </div>
                                    <li>
                                </ul>
                                <div class="weui_uploader_input_wrp">
                                    <input id="filechooser" class="weui_uploader_input" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="weui_btn_area">
                    <button class="weui_btn weui_btn_primary" action="submit">提交</button>
                </div>
            </form>
        </div>
    </div>
    <script src="./zepto.min.js"></script>
    <script type="text/javascript">
        var filechooser = document.getElementById('filechooser');
        var previewer = document.getElementById('previewer');

        filechooser.onchange = function() {
            var files = this.files;
            var file = files[0];

            // 接受 jpeg, jpg, png 类型的图片
            if (!/\/(?:jpeg|jpg|png)/i.test(file.type)) return;

            var reader = new FileReader();

            reader.onload = function() {
                var result = this.result;
                previewer.style = 'background-image:url(' + this.result + ');';
                while(previewer.hasChildNodes()) {
                    previewer.removeChild(previewer.firstChild);
                }
                // 清空图片上传框的值
                filechooser.value = '';
            };

            reader.readAsDataURL(file);
        };
    </script>
    <!-- <script src="./router.min.js"></script> -->
    <!-- <script src="./example.js"></script> -->
</body>

</html>
